class Cursor {

    field int x, y, x1, y1, count;
    field Array a,b;
    field Memory memAddress;
    field Game game;
    constructor Cursor new(int ax, int ay, int ax1, int ay1) {
        let a = Array.new(256);
        let b = Array.new(512);
        let count = 0;
        let x = ax;
        let y = ay;
        let x1 = ax1;
        let y1 = ay1;
        do draw();
        return this;
    }
    method void check() {
        var int i, flag;
        let i=0;
        let flag = 0;
        while(i<count) {
            if(a[i] = x) {
                if(b[i] = y) {
                    let flag = 1;
                    let i=count;
                }
            }
            let i = i+ 1;
        }

        if(flag = 0) {
            do Screen.setColor(false);
            do Screen.drawRectangle(x, y, x1, y1);
        }
        let flag = 0;
        return;
    }
    method void moveUp() {
        if(y > 0) {
            do check();
            if(y=7) {let y = y - 7;}
            else {let y = y - 8;}
            let y1 = y1 - 8;
            do Screen.setColor(true);
            do Screen.drawRectangle(x, y, x1, y1);
        }
        return;
    }

    method void moveDown() {
        if(y < 247) {
            do check();
            let y = y + 8;
            let y1 = y1 + 8;
            do Screen.setColor(true);
            do Screen.drawRectangle(x, y, x1, y1);
        }
        return;
    }

    method void moveLeft() {
        if(x > 0) {
            do check();
            if(x = 7) {let x = x - 7;}
            else {let x = x - 8;}
            let x1 = x1 - 8;
            do Screen.setColor(true);
            do Screen.drawRectangle(x, y, x1, y1);
        }
        return;
    }

    method void moveRight() {
        if(x < 503) {
            do check();
            let x = x + 8;
            let x1 = x1 + 8;
            do Screen.setColor(true);
            do Screen.drawRectangle(x, y, x1, y1);
        }
        return;
    }
    
    method void makebox() {
        if (x < 505) {
            do Screen.setColor(true);
            do Screen.drawRectangle(x,y, x1, y1);
            let a[count] = x;
            let b[count] = y;

            let x = x + 8;
            let x1 = x1 + 8;
            if(x1 = 519) {
                let x1 = x1 - 8-8;
                let x = x - 8-8;
            }
            do Screen.setColor(true);
            do Screen.drawRectangle(x, y, x1, y1);

            let count = count + 1;
        }
        return;
    }

    method void delcursor() {
        do Screen.setColor(false);
        do Screen.drawRectangle(x,y,x1,y1);

        let game = Game.begin(a, b, count);

        return;
    }

    method void draw() {
        do Screen.setColor(true);
        do Screen.drawRectangle(x, y, x1, y1);
        return;
    }
}